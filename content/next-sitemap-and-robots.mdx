---
title: Next.jsë¥¼ í™œìš©í•´ sitemap.xmlê³¼ robots.txt ë§Œë“¤ê¸°
publishedAt: "2023-09-12"
summary: ì •ë§ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
---

## ê°œìš”

Nextê°€ ì œê³µí•˜ëŠ” APIë¥¼ ì‚¬ìš©í•´ ê²€ìƒ‰ ì—”ì§„ ìµœì í™”ì— í•„ìš”í•œ sitemapê³¼ robotsë¥¼ ì •ë§ ì‰½ê²Œ ë§Œë“œëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.

## ê¸°ì¡´ ë°©ë²•

### sitemap.xml

ì œê°€ êµ¬í˜„í•œ [ê¸°ì¡´ ë°©ë²•](https://yujiseok.blog/post/how-to-improve-seo#%EC%82%AC%EC%9D%B4%ED%8A%B8%EB%A7%B5)ì€ `node`ì˜ `fs` ëª¨ë“ˆì„ ì‚¬ìš©í•´ mdx íŒŒì¼ë“¤ì„ ë™ì ìœ¼ë¡œ ì½ì–´ì„œ ë¹Œë“œ ì‹œ sitemapì„ ìƒì„±í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
sitemapì„ ìƒì„±í•˜ëŠ” ì½”ë“œê°€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‘ì„±ë˜ì—ˆê¸°ì—, `node` í™˜ê²½ì—ì„œ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ `ts-node` íŒ¨í‚¤ì§€ ì„¤ì¹˜ì™€ `tsconfig.node.json` íŒŒì¼ì„ ìƒì„±í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

```ts title="lib/sitemap.ts"
import fs from "fs";

const getDate = new Date().toISOString();

function createSiteMap() {
  const path = process.cwd();

  const allPosts = fs.readdirSync(`${path}/content`);
  const slugs = allPosts.map((post) => post.replace(".mdx", ""));

  const postUrls = slugs
    .map(
      (slug) => `<url>
        <loc>https://www.yujiseok.blog/post/${slug}</loc>
        <lastmod>${getDate}</lastmod>
      </url>`
    )
    .join("");

  const generatedSitemap = `<?xml version="1.0" encoding="UTF-8"?>
    <urlset
      xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 
      http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
    >
      <url>
        <loc>https://www.yujiseok.blog/</loc>
      </url>
      <url>
        <loc>https://www.yujiseok.blog/about</loc>
      </url>
      <url>
        <loc>https://www.yujiseok.blog/post</loc>
      </url>
      ${postUrls}
    </urlset> `;

  fs.writeFileSync("public/sitemap.xml", generatedSitemap, "utf-8");
}

createSiteMap();
```

### robots.txt

robots.txtì˜ ê²½ìš° ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” sitemapê³¼ ë‹¤ë¥´ê²Œ `public` í´ë” ë‚´ë¶€ì— ì •ì ì¸ íŒŒì¼ì„ ìƒì„±í•´ ë‘˜ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

> ğŸ’¡ ë¬¼ë¡  ìœ„ì˜ ë‘ ë°©ë²• ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ë§Œ, ì €ëŠ” Nextê°€ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” [API](https://nextjs.org/docs/app/api-reference/file-conventions/metadata)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ê°„ê²°í•˜ê³  Nextì— ë§ëŠ” ë°©ë²•ì´ë¼ê³  ìƒê°í•˜ì˜€ê³ ,
> ë¸”ë¡œê·¸ì— ì ìš©ì‹œí‚¤ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤.

## Nextê°€ ì œê³µí•˜ëŠ” APIë¡œ ë§Œë“¤ê¸°

> ğŸ’¡ ì´ë•Œ ëª¨ë“  íŒŒì¼ì˜ ê²½ë¡œëŠ” ë°˜ë“œì‹œ `app` ë””ë ‰í† ë¦¬ ë‚´ë¶€ì—¬ì•¼í•©ë‹ˆë‹¤.

### sitemap.xml

ê¸°ë³¸ì ìœ¼ë¡œ NextëŠ” sitemapì„ ìƒì„±í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

#### 1. ì •ì  `sitemap.xml`

ì •ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ ë§ ê·¸ëŒ€ë¡œ íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ì •ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

```xml title="app/sitemap.xml"
<urlset
	xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
	<url>
		<loc>https://www.yujiseok.blog</loc>
		<lastmod>2023-09-12</lastmod>
	</url>
	<url>
		<loc>https://www.yujiseok.blog/post</loc>
		<lastmod>2023-09-12</lastmod>
	</url>
	<url>
		<loc>https://www.yujiseok.blog/about</loc>
		<lastmod>2023-09-12</lastmod>
	</url>
	<url>
		<loc>https://www.yujiseok.blog/post/create-blog-with-nextjs</loc>
		<lastmod>2023-03-15</lastmod>
	</url>
  <!-- ... -->
</urlset>
```

ì •ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ í˜ì´ì§€ê°€ ìƒˆë¡œ ìƒì„±ë  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ì¶”ê°€í•´ ì¤˜ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆìŠµë‹ˆë‹¤.

#### 2. ë™ì  `sitemap.xml`

ë§¤ë²ˆ ì¶”ê°€í•˜ì§€ ì•Šê³  ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê¸° ìœ„í•´, `sitemap.ts` íŒŒì¼ì„ ì¶”ê°€í•´ `Sitemap`ì„ ë°˜í™˜í•˜ë„ë¡ í•˜ëŠ” í•¨ìˆ˜ë¥¼ `export` í•©ë‹ˆë‹¤.

```ts title="metadata-interface.d.ts"
type Sitemap = Array<{
  url: string;
  lastModified?: string | Date;
  changeFrequency?:
    | "always"
    | "hourly"
    | "daily"
    | "weekly"
    | "monthly"
    | "yearly"
    | "never";
  priority?: number;
}>;
```

```ts title="app/sitemap.ts"
import { allPosts } from "contentlayer/generated";
import type { MetadataRoute } from "next";

export default function sitemap(): MetadataRoute.Sitemap {
  const posts = allPosts.map((post) => ({
    url: `https://www.yujiseok.blog/post/${post.slug}`,
    lastModified: post.publishedAt,
  }));

  const routes = ["", "/post", "/about"].map((route) => ({
    url: `https://www.yujiseok.blog${route}`,
    lastModified: new Date().toISOString().split("T")[0],
  }));

  return [...routes, ...posts];
}
```

ì´ë•Œ, ì €ëŠ” [contentlayer](https://contentlayer.dev)ë¥¼ ì‚¬ìš©í•´ mdx ì»¨í…ì¸ ë¥¼ ê´€ë¦¬í•˜ê³  ìˆê¸°ì—, ìš°ì„  ëª¨ë“  í¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
ë¶ˆëŸ¬ì˜¨ í¬ìŠ¤íŠ¸ë¥¼ `map` ë©”ì„œë“œë¥¼ í†µí•´ ìˆœíšŒí•˜ë©´ì„œ sitemapì˜ í˜•ì‹ê³¼ `Sitemap` íƒ€ì…ì— ë§ëŠ” ë°°ì—´(`posts`)ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

ë˜, ê° ë¼ìš°íŠ¸ì— ë§ëŠ” sitemap ì—­ì‹œ í•„ìš”í•˜ê¸°ì—, ë¼ìš°íŠ¸ ë°°ì—´ì„ ìƒì„±í•œ í›„ ë§ˆì°¬ê°€ì§€ë¡œ `map` ë©”ì„œë“œë¥¼ í†µí•´ ìˆœíšŒí•´ ìƒˆë¡œìš´ ë°°ì—´(`routes`)ì„ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

ìµœì¢…ì ìœ¼ë¡œ ìƒˆë¡œ ìƒì„±í•œ ë‘ ë°°ì—´ì„ ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¥¼ í†µí•´ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì¹œ í›„ ë°˜í™˜í•©ë‹ˆë‹¤.

> ğŸ‘€ í•œëˆˆì— ë´ë„ ê¸°ì¡´ ë°©ì‹ì— ë¹„í•´ ê°„ê²°í•´ì§„ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### robots.txt

robots ì—­ì‹œ ë‘ ê°€ì§€ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

#### 1. ì •ì  `robots.txt`

```txt title="app/robots.txt"
User-Agent: *
Allow: /

Host: https://yujiseok.blog
Sitemap: https://yujiseok.blog/sitemap.xml
```

#### 2. ë™ì  `robots.txt`

robotsë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ `robots.ts` íŒŒì¼ì„ ì¶”ê°€í•´ `Robots` ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•˜ëŠ” í•¨ìˆ˜ë¥¼ `export` í•©ë‹ˆë‹¤.

```ts title="metadata-interface.d.ts"
type Robots = {
  rules:
    | {
        userAgent?: string | string[];
        allow?: string | string[];
        disallow?: string | string[];
        crawlDelay?: number;
      }
    | Array<{
        userAgent: string | string[];
        allow?: string | string[];
        disallow?: string | string[];
        crawlDelay?: number;
      }>;
  sitemap?: string | string[];
  host?: string;
};
```

```ts title="app/robots.ts"
import type { MetadataRoute } from "next";

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: "*",
      allow: "/",
    },
    sitemap: "https://yujiseok.blog/sitemap.xml",
    host: "https://yujiseok.blog",
  };
}
```

ì´ì™€ ê°™ì´ Nextê°€ ì œê³µí•˜ëŠ” APIë¥¼ ì‚¬ìš©í•˜ë©´ ê²€ìƒ‰ ì—”ì§„ ìµœì í™”ì— í•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë§ ê°„ë‹¨í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### ì¶œì²˜

- https://nextjs.org/docs/app/api-reference/file-conventions/metadata
